# Dockerfile.mlflow
FROM python:3.12-slim

# Install MLflow and dependencies
RUN pip install --no-cache-dir mlflow==2.6.1 boto3 psycopg2-binary

# Expose MLflow UI port
EXPOSE 5000

# Start MLflow server
CMD mlflow server \
    --backend-store-uri postgresql+psycopg2://mlflow:mlflow@postgres/mlflow \
    --default-artifact-root s3://mlflow-artifacts \
    --host 0.0.0.0 \
    --port 5000
